<% provide(:title, @user.name) %>

<div class="row">
  <div class="col-xs-12 col-sm-3 col-md-2">

    <!-- Profile secion -->
    <div>
      <% unless current_user != @user %>
        <%= image_tag @user.image_url(:thumb).to_s %>
      <% else %>
        <%= image_tag @user.image_url(:thumb).to_s %>
      <% end %>
    </div>
    <section>
      <h4>
        <strong><%= @user.name %></strong>
      </h4>
    </section>
    <div class="stats">
      <%= render 'users/stats' %>
      <p>
        <%= render 'users/follow_form' %>
      </p>
    </div>
    <div class="left_sidebar">
      <%= render 'users/sidebar' %>
    </div>
  </div>

  <!-- User protocols display -->
  <div class="col-xs-12 col-sm-6 col-md-6">
    <div id="app_view">
    </div>
  </div>

  <!-- User stats section -->
  <div class="col-xs-12 col-sm-6 col-md-4">
    <section class="well">
      <p>
        <strong>Current occupation:</strong>
        <%= @user.occupation %>
      </p>
      <p>
        <strong>Research interests:</strong>
        <%= @user.interests %>
      </p>

      <ul class="list-group">
        <li class="list-group-item">
          <span class="badge"><%= @user.ihcprotocols.count %></span>
          <%= link_to "Immunohistochemistry protocols:", user_ihcprotocols_path(@user), remote: true %>
        </li>
        <li class="list-group-item">
          <span class="badge"><%= @user.ifprotocols.count %></span>
          <%= link_to "Immunofluorescence protocols:", user_ifprotocols_path(@user), remote: true %>
        </li>
        <li class="list-group-item">
          <span class="badge"><%= @user.ipreprotocols.count %></span>
          <%= link_to "Immunoprecipitation protocols:", user_ipreprotocols_path(@user), remote: true %>
        </li>
        <li class="list-group-item">
          <span class="badge"><%= @user.ibprotocols.count %></span>
          <%= link_to "Immunoblot protocols:", user_ibprotocols_path(@user), remote: true %>
        </li>
        <li class="list-group-item">
          <span class="badge"><%= @user.flowprotocols.count %></span>
          <%= link_to "Flow Cytometry protocols:", user_flowprotocols_path(@user), remote: true %>
        </li>
        <li class="list-group-item">
          <span class="badge"><%= @user.ihcprotocols.count + @user.ifprotocols.count + @user.ipreprotocols.count + @user.ibprotocols.count + @user.flowprotocols.count %></span>
          <span><strong>Total protocols:</strong></span>
        </li>
      </ul>
    </section>
  </div>
</div>

